# Changelog
All notable changes to this project will be documented in this file.
**Do not edit this file. It is automatically generated.**

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [v1.7.0] - 2019-01-11

Package versions:

- `@storefront/breadcrumbs`: 1.33.1
- `@storefront/collections`: 1.32.1
- `@storefront/core`: 1.55.7
- `@storefront/details`: 1.32.1
- `@storefront/did-you-mean`: 1.32.1
- `@storefront/flux-capacitor`: 1.67.4
- `@storefront/infinite-scroll`: 1.6.1
- `@storefront/navigation`: 1.44.0
- `@storefront/page-size`: 1.34.1
- `@storefront/paging`: 1.34.0
- `@storefront/products`: 1.38.1
- `@storefront/query`: 1.39.1
- `@storefront/recommendations`: 1.29.1
- `@storefront/record-count`: 1.33.1
- `@storefront/related-queries`: 1.32.1
- `@storefront/sayt`: 1.40.1
- `@storefront/sort`: 1.35.1
- `@storefront/structure`: 1.47.0
- `@storefront/template`: 1.34.1

### Added
#### structure
- SF-1133: Add support for selecting last filtered refinement on Enter.
  - In cases where a filter term yields 1x result, hitting the enter key now selects the remaining refinement.
  - If a given refinement matches the filter term, the `gb-matches-term` class is added to the corresponding DOM node.
    - This class may be used to emphasize the matched refinement (eg. when focus is applied to the filter field).

## [v1.6.5] - 2019-01-10

Package versions:

- `@storefront/breadcrumbs`: 1.33.1
- `@storefront/collections`: 1.32.1
- `@storefront/core`: 1.55.7
- `@storefront/details`: 1.32.1
- `@storefront/did-you-mean`: 1.32.1
- `@storefront/flux-capacitor`: 1.67.4
- `@storefront/infinite-scroll`: 1.6.1
- `@storefront/navigation`: 1.44.0
- `@storefront/page-size`: 1.34.1
- `@storefront/paging`: 1.34.0
- `@storefront/products`: 1.38.1
- `@storefront/query`: 1.39.1
- `@storefront/recommendations`: 1.29.1
- `@storefront/record-count`: 1.33.1
- `@storefront/related-queries`: 1.32.1
- `@storefront/sayt`: 1.40.1
- `@storefront/sort`: 1.35.1
- `@storefront/structure`: 1.46.0
- `@storefront/template`: 1.34.1

### Added
#### core
- SF-1163: Add hard-coded `GBI_METADATA` to the metadata of all tracking events.
  - `GBI_METADATA` indicates to our tracking service that an event is of GBI origin.
  - `GBI_METADATA` Objects:
    ```js
    [
      {
        key: 'gbi',
        value: 'true'
      },
      {
        key: 'gbi_experience',
        value: 'storefront'
      }
    ];
    ```
  - Note: Storefront will automatically add the above metadata objects and replace any existing metadata objects whose keys are `gbi` or `gbi_experience`.

## [v1.6.4] - 2019-01-09

Package versions:

- `@storefront/breadcrumbs`: 1.33.1
- `@storefront/collections`: 1.32.1
- `@storefront/core`: 1.55.6
- `@storefront/details`: 1.32.1
- `@storefront/did-you-mean`: 1.32.1
- `@storefront/flux-capacitor`: 1.67.4
- `@storefront/infinite-scroll`: 1.6.1
- `@storefront/navigation`: 1.44.0
- `@storefront/page-size`: 1.34.1
- `@storefront/paging`: 1.34.0
- `@storefront/products`: 1.38.1
- `@storefront/query`: 1.39.1
- `@storefront/recommendations`: 1.29.1
- `@storefront/record-count`: 1.33.1
- `@storefront/related-queries`: 1.32.1
- `@storefront/sayt`: 1.40.1
- `@storefront/sort`: 1.35.1
- `@storefront/structure`: 1.46.0
- `@storefront/template`: 1.34.1

### Changed
#### core
- Update `@storefront/flux-capacitor` to 1.67.4.

### Fixed
#### core
- SF-1237: Fix issue where past purchase sorts are not correctly applied/transmitted.

## [v1.6.3] - 2019-01-07

Package versions:

- `@storefront/breadcrumbs`: 1.33.1
- `@storefront/collections`: 1.32.1
- `@storefront/core`: 1.55.6
- `@storefront/details`: 1.32.1
- `@storefront/did-you-mean`: 1.32.1
- `@storefront/flux-capacitor`: 1.67.4
- `@storefront/infinite-scroll`: 1.6.1
- `@storefront/navigation`: 1.44.0
- `@storefront/page-size`: 1.34.1
- `@storefront/paging`: 1.34.0
- `@storefront/products`: 1.38.1
- `@storefront/query`: 1.39.1
- `@storefront/recommendations`: 1.29.1
- `@storefront/record-count`: 1.33.1
- `@storefront/related-queries`: 1.32.1
- `@storefront/sayt`: 1.40.1
- `@storefront/sort`: 1.35.1
- `@storefront/structure`: 1.46.0
- `@storefront/template`: 1.34.1

### Changed
#### core
- Update `@storefront/flux-capacitor` to 1.67.4.

### Added
#### flux-capacitor
- SF-1237: Exposed past purchase sort options via importable `PAST_PURCHASE_SORTS` object.
  - `PAST_PURCHASE_SORTS` exposes:
    - `DEFAULT` - Sorts past purchases based on the past purchase endpoint.
    - `MOST_PURCHASED` - Sorts past purchases based on the quantity purchased.
    - `MOST_RECENT` - Sorts past purchases based on the latest purchased timestamp.
- SF-1237: Added support for configuring past purchase sort options.
  ```
  {
  ...
    recommendations: {
      pastPurchases: {
        sort: {
          options: [{ field: PAST_PURCHASE_SORTS.MOST_RECENT, descending: true }, { field: PAST_PURHCASE_SORTS. MOST_PURCHASED, descending: true }],
          default: { field: PAST_PURCHASE_SORTS.MOST_RECENT, descending: true }
      }
    }
  }
  ...
  ```

### Fixed
#### core
- SF-1237: Fix issue where past purchase sorts are not correctly applied/transmitted.

#### flux-capacitor
- SF-1237: Fix issue where past purchase sorts are not correctly applied/transmitted.


## [v1.6.2] - 2019-01-04

Package versions:

- `@storefront/breadcrumbs`: 1.33.1
- `@storefront/collections`: 1.32.1
- `@storefront/core`: 1.55.5
- `@storefront/details`: 1.32.1
- `@storefront/did-you-mean`: 1.32.1
- `@storefront/flux-capacitor`: 1.67.3
- `@storefront/infinite-scroll`: 1.6.1
- `@storefront/navigation`: 1.44.0
- `@storefront/page-size`: 1.34.1
- `@storefront/paging`: 1.34.0
- `@storefront/products`: 1.38.1
- `@storefront/query`: 1.39.1
- `@storefront/recommendations`: 1.29.1
- `@storefront/record-count`: 1.33.1
- `@storefront/related-queries`: 1.32.1
- `@storefront/sayt`: 1.40.1
- `@storefront/sort`: 1.35.1
- `@storefront/structure`: 1.46.0
- `@storefront/template`: 1.34.1

### Changed
#### core
- Update `@storefront/flux-capacitor` to 1.67.3.

### Fixed
#### flux-capacitor
- SF-1243: `updateQuery` action sets `original` query and clears the rest of query state.

## [v1.6.1] - 2019-01-04

Package versions:

- `@storefront/breadcrumbs`: 1.33.1
- `@storefront/collections`: 1.32.1
- `@storefront/core`: 1.55.4
- `@storefront/details`: 1.32.1
- `@storefront/did-you-mean`: 1.32.1
- `@storefront/flux-capacitor`: 1.67.2
- `@storefront/infinite-scroll`: 1.6.1
- `@storefront/navigation`: 1.44.0
- `@storefront/page-size`: 1.34.1
- `@storefront/paging`: 1.34.0
- `@storefront/products`: 1.38.1
- `@storefront/query`: 1.39.1
- `@storefront/recommendations`: 1.29.1
- `@storefront/record-count`: 1.33.1
- `@storefront/related-queries`: 1.32.1
- `@storefront/sayt`: 1.40.1
- `@storefront/sort`: 1.35.1
- `@storefront/structure`: 1.46.0
- `@storefront/template`: 1.34.1

### Changed
#### core
- Update `@storefront/flux-capacitor` to 1.67.2.

### Fixed
#### flux-capacitor
- SF-1243: Remove unnecessary default values in query reducer.

## [v1.6.0] - 2019-01-04

Package versions:

- `@storefront/breadcrumbs`: 1.33.1
- `@storefront/collections`: 1.32.1
- `@storefront/core`: 1.55.3
- `@storefront/details`: 1.32.1
- `@storefront/did-you-mean`: 1.32.1
- `@storefront/flux-capacitor`: 1.67.1
- `@storefront/infinite-scroll`: 1.6.1
- `@storefront/navigation`: 1.44.0
- `@storefront/page-size`: 1.34.1
- `@storefront/paging`: 1.34.0
- `@storefront/products`: 1.38.1
- `@storefront/query`: 1.39.1
- `@storefront/recommendations`: 1.29.1
- `@storefront/record-count`: 1.33.1
- `@storefront/related-queries`: 1.32.1
- `@storefront/sayt`: 1.40.1
- `@storefront/sort`: 1.35.1
- `@storefront/structure`: 1.46.0
- `@storefront/template`: 1.34.1

### Changed
#### navigation
- SF-1197: Restored the "more" button on `gb-filter-refinement-controls`.
- SF-1197: `gb-filtered-refinement-list` is paginated when there are no more refinements
  to fetch for that navigation.
- SF-1197: `FilteredRefinementList` now consumes `filterControls`.

#### structure
- SF-1197: `gb-filtered-list` now uses a `gb-paged-list` instead of a `gb-list`.
  - The list is paginated to prevent large lists from locking up the display.
  - **Potentially breaking:** Stylesheets relying on `gb-list` being a direct
    child of `gb-filtered-list` (i.e. `gb-filtered-list > gb-list`) will need
    to be changed.
  - Pagination is enabled by default. To disable it, set the `paginated` prop
    on `gb-filtered-list` to `false`.

### Removed
#### paging
- SF-1197: Components `pager`, `pages` and `terminal-pager` have been moved to
  `@storefront/structure`.

### Added
#### paging
- SF-1197: Added `@storefront/structure` `^1.45.0` as a peer dependency.

#### structure
- SF-1197: `Pager`, `Pages` and `TerminalPager` components from `@storefront/paging`
  have been moved into this package.
- SF-1197: A new `GenericPaging` component was added as a generic version of
  `Paging` in `@storefront/paging` that does not rely on the store.
- SF-1197: A new `PagedList` component was added to display a paginated list of items.
- SF-1197: `FilteredList` learned the `paginated` prop to enable or disable pagination.
  - It is `true` by default to enable pagination.

### Deprecated
#### paging
- SF-1197: The static methods `Paging.generateRange` and `Paging.range` have
  been moved to `GenericPaging` in `@storefront/structure` and are deprecated
  in favor of their `GenericPaging` equivalents.
- SF-1197: Importing `Pager`, `Pages` and `TerminalPager` from
  `@storefront/paging` is now deprecated. Import them from
  `@storefront/structure` instead.

## [v1.5.0] - 2019-01-04

Package versions:

- `@storefront/breadcrumbs`: 1.33.1
- `@storefront/collections`: 1.32.1
- `@storefront/core`: 1.55.3
- `@storefront/details`: 1.32.1
- `@storefront/did-you-mean`: 1.32.1
- `@storefront/flux-capacitor`: 1.67.1
- `@storefront/infinite-scroll`: 1.6.1
- `@storefront/navigation`: 1.44.0
- `@storefront/page-size`: 1.34.1
- `@storefront/paging`: 1.34.0
- `@storefront/products`: 1.38.1
- `@storefront/query`: 1.39.1
- `@storefront/recommendations`: 1.29.1
- `@storefront/record-count`: 1.33.1
- `@storefront/related-queries`: 1.32.1
- `@storefront/sayt`: 1.40.1
- `@storefront/sort`: 1.35.1
- `@storefront/structure`: 1.46.0
- `@storefront/template`: 1.34.1

### Changed
#### navigation
- SF-1197: Restored the "more" button on `gb-filter-refinement-controls`.
- SF-1197: `gb-filtered-refinement-list` is paginated when there are no more refinements
  to fetch for that navigation.
- SF-1197: `FilteredRefinementList` now consumes `filterControls`.

#### structure
- SF-1197: `gb-filtered-list` now uses a `gb-paged-list` instead of a `gb-list`.
  - The list is paginated to prevent large lists from locking up the display.
  - **Potentially breaking:** Stylesheets relying on `gb-list` being a direct
    child of `gb-filtered-list` (i.e. `gb-filtered-list > gb-list`) will need
    to be changed.
  - Pagination is enabled by default. To disable it, set the `paginated` prop
    on `gb-filtered-list` to `false`.

### Removed
#### paging
- SF-1197: Components `pager`, `pages` and `terminal-pager` have been moved to
  `@storefront/structure`.

### Added
#### paging
- SF-1197: Added `@storefront/structure` `^1.45.0` as a peer dependency.

#### structure
- SF-1197: `Pager`, `Pages` and `TerminalPager` components from `@storefront/paging`
  have been moved into this package.
- SF-1197: A new `GenericPaging` component was added as a generic version of
  `Paging` in `@storefront/paging` that does not rely on the store.
- SF-1197: A new `PagedList` component was added to display a paginated list of items.
- SF-1197: `FilteredList` learned the `paginated` prop to enable or disable pagination.
  - It is `true` by default to enable pagination.

### Deprecated
#### paging
- SF-1197: The static methods `Paging.generateRange` and `Paging.range` have
  been moved to `GenericPaging` in `@storefront/structure` and are deprecated
  in favor of their `GenericPaging` equivalents.
- SF-1197: Importing `Pager`, `Pages` and `TerminalPager` from
  `@storefront/paging` is now deprecated. Import them from
  `@storefront/structure` instead.

## [v1.4.3] - 2019-01-02

Package versions:

- `@storefront/breadcrumbs`: 1.33.1
- `@storefront/collections`: 1.32.1
- `@storefront/core`: 1.55.3
- `@storefront/details`: 1.32.1
- `@storefront/did-you-mean`: 1.32.1
- `@storefront/flux-capacitor`: 1.67.1
- `@storefront/infinite-scroll`: 1.6.1
- `@storefront/navigation`: 1.43.1
- `@storefront/page-size`: 1.34.1
- `@storefront/paging`: 1.33.1
- `@storefront/products`: 1.38.1
- `@storefront/query`: 1.39.1
- `@storefront/recommendations`: 1.29.1
- `@storefront/record-count`: 1.33.1
- `@storefront/related-queries`: 1.32.1
- `@storefront/sayt`: 1.40.1
- `@storefront/sort`: 1.35.1
- `@storefront/structure`: 1.45.1
- `@storefront/template`: 1.34.1

### Changed
#### core
- Update `@storefront/flux-capacitor` to 1.67.1.

### Fixed
#### breadcrumbs
- Update repository, issues, and homepage fields in `package.json` file.
  - All fields now point to monorepo, rather than package-specific repositories.

#### collections
- Update repository, issues, and homepage fields in `package.json` file.
  - All fields now point to monorepo, rather than package-specific repositories.

#### core
- Update repository, issues, and homepage fields in `package.json` file.
  - All fields now point to monorepo, rather than package-specific repositories.

#### details
- Update repository, issues, and homepage fields in `package.json` file.
  - All fields now point to monorepo, rather than package-specific repositories.

#### did-you-mean
- Update repository, issues, and homepage fields in `package.json` file.
  - All fields now point to monorepo, rather than package-specific repositories.

#### flux-capacitor
- Update repository, issues, and homepage fields in `package.json` file.
  - All fields now point to monorepo, rather than package-specific repositories.

#### infinite-scroll
- Update repository, issues, and homepage fields in `package.json` file.
  - All fields now point to monorepo, rather than package-specific repositories.

#### navigation
- Update repository, issues, and homepage fields in `package.json` file.
  - All fields now point to monorepo, rather than package-specific repositories.

#### page-size
- Update repository, issues, and homepage fields in `package.json` file.
  - All fields now point to monorepo, rather than package-specific repositories.

#### paging
- Update repository, issues, and homepage fields in `package.json` file.
  - All fields now point to monorepo, rather than package-specific repositories.

#### products
- Update repository, issues, and homepage fields in `package.json` file.
  - All fields now point to monorepo, rather than package-specific repositories.

#### query
- Update repository, issues, and homepage fields in `package.json` file.
  - All fields now point to monorepo, rather than package-specific repositories.

#### recommendations
- Update repository, issues, and homepage fields in `package.json` file.
  - All fields now point to monorepo, rather than package-specific repositories.

#### record-count
- Update repository, issues, and homepage fields in `package.json` file.
  - All fields now point to monorepo, rather than package-specific repositories.

#### related-queries
- Update repository, issues, and homepage fields in `package.json` file.
  - All fields now point to monorepo, rather than package-specific repositories.

#### sayt
- Update repository, issues, and homepage fields in `package.json` file.
  - All fields now point to monorepo, rather than package-specific repositories.

#### sort
- Update repository, issues, and homepage fields in `package.json` file.
  - All fields now point to monorepo, rather than package-specific repositories.

#### structure
- Update repository, issues, and homepage fields in `package.json` file.
  - All fields now point to monorepo, rather than package-specific repositories.

#### template
- Update repository, issues, and homepage fields in `package.json` file.
  - All fields now point to monorepo, rather than package-specific repositories.

## [v1.4.2] - 2019-01-02

Package versions:

- `@storefront/breadcrumbs`: 1.33.0
- `@storefront/collections`: 1.32.0
- `@storefront/core`: 1.55.2
- `@storefront/details`: 1.32.0
- `@storefront/did-you-mean`: 1.32.0
- `@storefront/flux-capacitor`: 1.67.0
- `@storefront/infinite-scroll`: 1.6.0
- `@storefront/navigation`: 1.43.0
- `@storefront/page-size`: 1.34.0
- `@storefront/paging`: 1.33.0
- `@storefront/products`: 1.38.0
- `@storefront/query`: 1.39.0
- `@storefront/recommendations`: 1.29.0
- `@storefront/record-count`: 1.33.0
- `@storefront/related-queries`: 1.32.0
- `@storefront/sayt`: 1.40.0
- `@storefront/sort`: 1.35.0
- `@storefront/structure`: 1.45.0
- `@storefront/template`: 1.34.0

### Added
#### core
- SF-1239: Set `maxRefinements` default to 20 in `search` configuration object.

## [v1.4.1] - 2018-12-20

Package versions:

- `@storefront/breadcrumbs`: 1.33.0
- `@storefront/collections`: 1.32.0
- `@storefront/core`: 1.55.1
- `@storefront/details`: 1.32.0
- `@storefront/did-you-mean`: 1.32.0
- `@storefront/flux-capacitor`: 1.67.0
- `@storefront/infinite-scroll`: 1.6.0
- `@storefront/navigation`: 1.43.0
- `@storefront/page-size`: 1.34.0
- `@storefront/paging`: 1.33.0
- `@storefront/products`: 1.38.0
- `@storefront/query`: 1.39.0
- `@storefront/recommendations`: 1.29.0
- `@storefront/record-count`: 1.33.0
- `@storefront/related-queries`: 1.32.0
- `@storefront/sayt`: 1.40.0
- `@storefront/sort`: 1.35.0
- `@storefront/structure`: 1.45.0
- `@storefront/template`: 1.34.0

### Changed
#### core
- SF-1230: Change the default value for past purchase refinements from 30 to 20.

## [v1.4.0] - 2018-12-19

Package versions:

- `@storefront/breadcrumbs`: 1.33.0
- `@storefront/collections`: 1.32.0
- `@storefront/core`: 1.55.0
- `@storefront/details`: 1.32.0
- `@storefront/did-you-mean`: 1.32.0
- `@storefront/flux-capacitor`: 1.67.0
- `@storefront/infinite-scroll`: 1.6.0
- `@storefront/navigation`: 1.43.0
- `@storefront/page-size`: 1.34.0
- `@storefront/paging`: 1.33.0
- `@storefront/products`: 1.38.0
- `@storefront/query`: 1.39.0
- `@storefront/recommendations`: 1.29.0
- `@storefront/record-count`: 1.33.0
- `@storefront/related-queries`: 1.32.0
- `@storefront/sayt`: 1.40.0
- `@storefront/sort`: 1.35.0
- `@storefront/structure`: 1.45.0
- `@storefront/template`: 1.34.0

### Changed
#### breadcrumbs
- Update `@storefront/core` to 1.55.0.

#### collections
- Update `@storefront/core` to 1.55.0.

#### core
- Update `@storefront/flux-capacitor` to 1.67.0.

#### details
- Update `@storefront/core` to 1.55.0.

#### did-you-mean
- Update `@storefront/core` to 1.55.0.

#### flux-capacitor
- SF-1230: Add support for fetching more past purchase refinements.
  - Implementations can now fetch and ingest additional refinements for past purchase-type navigations.

#### infinite-scroll
- Update `@storefront/core` to 1.55.0.

#### navigation
- Update `@storefront/core` to 1.55.0.
- SF-1230: Improve support for past purchase features.
  - Navigation components can now be configured to fetch and display 'more' past purchase refinements.

#### page-size
- Update `@storefront/core` to 1.55.0.

#### paging
- Update `@storefront/core` to 1.55.0.

#### products
- Update `@storefront/core` to 1.55.0.

#### query
- Update `@storefront/core` to 1.55.0.

#### recommendations
- Update `@storefront/core` to 1.55.0.

#### record-count
- Update `@storefront/core` to 1.55.0.

#### related-queries
- Update `@storefront/core` to 1.55.0.

#### sayt
- Update `@storefront/core` to 1.55.0.

#### sort
- Update `@storefront/core` to 1.55.0.

#### structure
- Update `@storefront/core` to 1.55.0.

#### template
- Update `@storefront/core` to 1.55.0.

## [v1.3.3] - 2018-12-07

Package versions:

- `@storefront/breadcrumbs`: 1.32.0
- `@storefront/collections`: 1.31.0
- `@storefront/core`: 1.54.1
- `@storefront/details`: 1.31.0
- `@storefront/did-you-mean`: 1.31.0
- `@storefront/flux-capacitor`: 1.66.0
- `@storefront/infinite-scroll`: 1.5.0
- `@storefront/navigation`: 1.42.0
- `@storefront/page-size`: 1.33.0
- `@storefront/paging`: 1.32.0
- `@storefront/products`: 1.37.0
- `@storefront/query`: 1.38.0
- `@storefront/recommendations`: 1.28.0
- `@storefront/record-count`: 1.32.0
- `@storefront/related-queries`: 1.31.0
- `@storefront/sayt`: 1.39.0
- `@storefront/sort`: 1.34.0
- `@storefront/structure`: 1.44.0
- `@storefront/template`: 1.33.0

### Fixed
#### core
- SF-1229: Use the `pastPurchaseSortSelected` selector to build up the `pastPurchase` request.

## [1.3.2] - 2018-10-05

- `@storefront/breadcrumbs`: 1.28.6
- `@storefront/collections`: 1.28.3
- `@storefront/core`: 1.47.0
- `@storefront/details`: 1.28.4
- `@storefront/did-you-mean`: 1.28.6
- `@storefront/flux-capacitor`: 1.57.0
- `@storefront/infinite-scroll`: 1.2.0
- `@storefront/navigation`: 1.38.2
- `@storefront/page-size`: 1.30.4
- `@storefront/paging`: 1.29.4
- `@storefront/products`: 1.34.7
- `@storefront/query`: 1.35.8
- `@storefront/recommendations`: 1.25.5
- `@storefront/record-count`: 1.29.3
- `@storefront/related-queries`: 1.28.6
- `@storefront/sayt`: 1.37.7
- `@storefront/sort`: 1.30.5
- `@storefront/structure`: 1.40.3
- `@storefront/template`: 1.29.6

### Changed
- The URL is updated before any requests are sent.
  - This should reduce the number of extranous calls.
- Repeat queries are now allowed.

### Added
- Observer events `DETAILS_CHANGED` and `PAST_PURCHASE_CHANGED` fire on
  new details and past purchase searches respectively.

### Fixed
- Zero results will no longer be shown for a search that returns a redirect.
